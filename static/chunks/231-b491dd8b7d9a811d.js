"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[231],{3375:(e,t,s)=>{s.d(t,{Vp:()=>d,GW:()=>o,zI:()=>c,rN:()=>x});var a=s(3934),r=s(3435),n=s(171),l=s(6322);let o=e=>{let{className:t="",loading:s=!1,error:o=null,monthlyStats:c,expenseTrend:i,topCategories:d,budgets:x}=e,u=(0,r.useTranslations)("dashboard");return s?(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 ".concat(t),children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:u("title")}),(0,a.jsx)("p",{className:"text-gray-600",children:u("welcome")})]}),(0,a.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,a.jsx)("div",{className:"text-lg text-gray-600",children:"Loading expenses..."})})]}):o?(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 ".concat(t),children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:u("title")}),(0,a.jsx)("p",{className:"text-gray-600",children:u("welcome")})]}),(0,a.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,a.jsxs)("div",{className:"text-lg text-red-600",children:["Error: ",o]})})]}):(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 ".concat(t),children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:u("title")}),(0,a.jsx)("p",{className:"text-gray-600",children:u("welcome")})]}),(0,a.jsxs)("div",{className:"mb-8 grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(l.CN,{title:u("totalExpenses"),value:c.totalExpenses,trend:i.trend,trendValue:"".concat(i.value," ").concat(u("fromLastMonth")),icon:(0,a.jsx)("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,a.jsx)(l.CN,{title:u("totalBudget"),value:c.totalBudget,subtitle:"".concat(u(c.totalBudget-c.totalExpenses>=0?"remaining":"overBy"),": ฿").concat(Math.abs(c.totalBudget-c.totalExpenses).toFixed(2)),icon:(0,a.jsx)("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsx)(l.CN,{title:u("transactions"),value:c.expenseCount,subtitle:u("thisMonth"),icon:(0,a.jsx)("svg",{className:"h-6 w-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,a.jsx)(l.CN,{title:u("averagePerTransaction"),value:c.averageExpense,icon:(0,a.jsx)("svg",{className:"h-6 w-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)("h3",{className:"text-lg font-semibold",children:u("topCategories")})}),(0,a.jsx)(n.Wu,{children:d.length>0?(0,a.jsx)("div",{className:"space-y-4",children:d.map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium capitalize",children:t}),(0,a.jsxs)("span",{className:"font-semibold",children:["฿",s.toFixed(2)]})]},t)})}):(0,a.jsx)("p",{className:"text-gray-500",children:u("noExpensesMessage")})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)("h3",{className:"text-lg font-semibold",children:u("quickStats")})}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:u("budgetUtilization")}),(0,a.jsx)("span",{className:"font-semibold",children:c.totalBudget>0?"".concat((c.totalExpenses/c.totalBudget*100).toFixed(1),"%"):"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:u("activeBudgets")}),(0,a.jsx)("span",{className:"font-semibold",children:x.length})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:u("categoriesUsed")}),(0,a.jsx)("span",{className:"font-semibold",children:Object.keys(c.expensesByCategory).length})]})]})})]})]})]})},c=e=>{let{className:t="",expenses:s,loading:r,isFormOpen:o,editingExpense:c,onAddExpense:i,onEditExpense:d,onDeleteExpense:x,onOpenEditModal:u,onCloseEditModal:p,onOpenAddModal:h,onCloseAddModal:g}=e;return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 ".concat(t),children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Expenses"}),(0,a.jsx)(n.$n,{onClick:h,children:"Add Expense"})]}),(0,a.jsx)(l.fS,{expenses:s,onEdit:u,onDelete:x,isLoading:r}),(0,a.jsx)(n.aF,{isOpen:o,onClose:g,size:"lg",showCloseButton:!1,children:(0,a.jsx)(l.Dp,{onSubmit:i,onCancel:g,isLoading:r})}),(0,a.jsx)(n.aF,{isOpen:!!c,onClose:p,size:"lg",showCloseButton:!1,children:c&&(0,a.jsx)(l.Dp,{initialData:{amount:c.amount,category:c.category,description:c.description,date:c.date,recurrence:c.recurrence},onSubmit:d,onCancel:p,isLoading:r,isEdit:!0})})]})};var i=s(5393);let d=e=>{let{className:t=""}=e;return(0,a.jsx)("div",{className:"container mx-auto px-4 py-8 ".concat(t),children:(0,a.jsx)(i.j6,{})})},x=e=>{let{className:t="",formData:s,errors:l,isLoading:o,onInputChange:c,onSubmit:i}=e,d=(0,r.useTranslations)("login");return(0,a.jsxs)("div",{className:"from-cyberpunk-dark via-cyberpunk-dark to-cyberpunk-blue/20 flex min-h-screen items-center justify-center bg-gradient-to-br px-4 py-12 sm:px-6 lg:px-8 ".concat(t),children:[(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-neon-cyan/10 absolute top-1/4 left-1/4 h-96 w-96 animate-pulse rounded-full blur-3xl"}),(0,a.jsx)("div",{className:"bg-neon-magenta/10 absolute right-1/4 bottom-1/4 h-96 w-96 animate-pulse rounded-full blur-3xl delay-1000"}),(0,a.jsx)("div",{className:"bg-neon-blue/5 absolute top-1/2 left-1/2 h-[800px] w-[800px] -translate-x-1/2 -translate-y-1/2 transform animate-pulse rounded-full blur-3xl delay-500"})]}),(0,a.jsxs)("div",{className:"relative z-10 w-full max-w-md",children:[(0,a.jsxs)("div",{className:"mb-8 text-center",children:[(0,a.jsx)("div",{className:"mb-6 flex justify-center",children:(0,a.jsx)(n.WB,{size:56,fallbackText:"TE",className:"border-neon-cyan shadow-neon-cyan/25 border-2 shadow-lg"})}),(0,a.jsx)("h1",{className:"from-neon-cyan via-neon-blue to-neon-magenta mb-2 bg-gradient-to-r bg-clip-text text-4xl font-bold text-transparent",children:d("title")}),(0,a.jsx)("p",{className:"text-text-secondary text-lg font-medium",children:d("subtitle")}),(0,a.jsx)("div",{className:"mt-4 flex justify-center",children:(0,a.jsx)("div",{className:"via-neon-cyan h-0.5 w-24 bg-gradient-to-r from-transparent to-transparent"})})]}),(0,a.jsx)(n.Zp,{className:"bg-glass-bg border-card-border shadow-cyberpunk-dark/50 shadow-2xl backdrop-blur-md",children:(0,a.jsxs)("form",{onSubmit:i,children:[(0,a.jsxs)(n.aR,{className:"border-card-border border-b pb-6 text-center",children:[(0,a.jsx)("h2",{className:"mb-2 text-2xl font-bold text-white",children:d("signIn")}),(0,a.jsx)("p",{className:"text-text-secondary text-sm",children:"Access your cyberpunk expense tracker"})]}),(0,a.jsxs)(n.Wu,{className:"space-y-6 pt-6",children:[l.general&&(0,a.jsx)("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 px-4 py-3 text-red-400 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-red-400",children:"⚠️"}),l.general]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-text-secondary block text-sm font-medium tracking-wider uppercase",children:d("email")}),(0,a.jsx)(n.pd,{type:"email",value:s.email,onChange:c("email"),error:l.email,fullWidth:!0,required:!0,className:"bg-glass-bg border-card-border placeholder-text-secondary focus:border-neon-cyan focus:ring-neon-cyan/20 text-white",placeholder:"Enter your neural link email"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-text-secondary block text-sm font-medium tracking-wider uppercase",children:d("password")}),(0,a.jsx)(n.pd,{type:"password",value:s.password,onChange:c("password"),error:l.password,fullWidth:!0,required:!0,className:"bg-glass-bg border-card-border placeholder-text-secondary focus:border-neon-cyan focus:ring-neon-cyan/20 text-white",placeholder:"Enter your access code"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("label",{className:"text-text-secondary hover:text-neon-cyan flex cursor-pointer items-center transition-colors",children:[(0,a.jsx)("input",{type:"checkbox",className:"accent-neon-cyan mr-2"}),"Remember neural link"]}),(0,a.jsx)("a",{href:"#",className:"text-neon-cyan hover:text-neon-blue transition-colors",children:"Forgot access code?"})]})]}),(0,a.jsx)(n.wL,{className:"pt-6",children:(0,a.jsx)(n.tG,{type:"submit",isLoading:o,disabled:o,fullWidth:!0,variant:"neon",className:"py-3 text-lg font-semibold",children:o?(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"border-neon-cyan h-5 w-5 animate-spin rounded-full border-2 border-t-transparent"}),"Connecting to mainframe..."]}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDD10"}),d("signInButton")]})})})]})}),(0,a.jsxs)("div",{className:"mt-8 text-center",children:[(0,a.jsxs)("p",{className:"text-text-secondary text-sm",children:["New to the system?"," ",(0,a.jsx)("a",{href:"#",className:"text-neon-cyan hover:text-neon-blue font-medium transition-colors",children:"Request neural implant"})]}),(0,a.jsxs)("div",{className:"text-text-secondary/60 mt-4 font-mono text-xs",children:[(0,a.jsx)("div",{children:"SYSTEM STATUS: ONLINE"}),(0,a.jsx)("div",{children:"ENCRYPTION: QUANTUM-256"}),(0,a.jsx)("div",{children:"CONNECTION: SECURE NEURAL LINK"})]})]})]})]})}},5393:(e,t,s)=>{s.d(t,{j6:()=>f,xh:()=>v,o8:()=>k,wn:()=>E});var a=s(3934),r=s(6734),n=s(4637),l=s(7018),o=s(9141);let c=e=>({budgets:[],budgetProgress:[],isLoading:!1,error:null,setBudgets:t=>e(e=>{e.budgets=t}),addBudget:t=>e(e=>{e.budgets.push(t)}),updateBudget:(t,s)=>e(e=>{let a=e.budgets.findIndex(e=>e.id===t);-1!==a&&Object.assign(e.budgets[a],s,{updatedAt:new Date})}),deleteBudget:t=>e(e=>{e.budgets=e.budgets.filter(e=>e.id!==t)}),setBudgetProgress:t=>e(e=>{e.budgetProgress=t}),updateBudgetProgress:(t,s)=>e(e=>{let a=e.budgetProgress.findIndex(e=>e.budgetId===t);-1!==a&&Object.assign(e.budgetProgress[a],s)}),setLoading:t=>e(e=>{e.isLoading=t}),setError:t=>e(e=>{e.error=t}),clearBudgets:()=>e(e=>{e.budgets=[],e.budgetProgress=[],e.error=null})}),i=e=>({categories:[],isLoading:!1,error:null,setCategories:t=>e(e=>{e.categories=t}),addCategory:t=>e(e=>{e.categories.push(t)}),updateCategory:(t,s)=>e(e=>{let a=e.categories.findIndex(e=>e.id===t);-1!==a&&Object.assign(e.categories[a],s,{updatedAt:new Date})}),deleteCategory:t=>e(e=>{e.categories=e.categories.filter(e=>e.id!==t)}),setLoading:t=>e(e=>{e.isLoading=t}),setError:t=>e(e=>{e.error=t}),clearCategories:()=>e(e=>{e.categories=[],e.error=null})});var d=s(8829);let x=e=>({expenses:[],isLoading:!1,error:null,setExpenses:t=>e(e=>{e.expenses=t}),addExpense:t=>e(e=>{e.expenses.push(t)}),updateExpense:(t,s)=>e(e=>{let a=e.expenses.findIndex(e=>e.id===t);-1!==a&&Object.assign(e.expenses[a],s,{updatedAt:new Date})}),deleteExpense:t=>e(e=>{let s=e.expenses.findIndex(e=>e.id===t);-1!==s&&(e.expenses[s].status=d.Dr.Deleted,e.expenses[s].updatedAt=new Date)}),setLoading:t=>e(e=>{e.isLoading=t}),setError:t=>e(e=>{e.error=t}),clearExpenses:()=>e(e=>{e.expenses=[],e.error=null})}),u=(0,n.v)()((0,l.lt)((0,l.eh)((0,o.D)(function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return{...c(...t),...i(...t),...x(...t)}})),{name:"expense-tracker-store"}));var p=s(171),h=s(6322),g=s(5921),m=s(5527);let j={createExpense:async e=>{try{let{token:t,...s}=e;return(await m.$.post("/api/v1/expense",s,{headers:{Authorization:"Bearer ".concat(t)}})).data}catch(e){throw console.error("Failed to create expense:",e),e}},getExpenses:async e=>{try{return(await m.$.get("/api/v1/expense",{headers:{Authorization:"Bearer ".concat(e.token)}})).data}catch(e){throw console.error("Failed to fetch expenses:",e),e}},getExpense:async e=>{try{return(await m.$.get("/api/v1/expenses/".concat(e.id))).data}catch(t){throw console.error("Failed to fetch expense ".concat(e.id,":"),t),t}},updateExpense:async e=>{try{return(await m.$.put("/api/v1/expenses/".concat(e.id),e.data)).data}catch(t){throw console.error("Failed to update expense ".concat(e.id,":"),t),t}},deleteExpense:async e=>{try{return(await m.$.delete("/api/v1/expense/".concat(e.id),{headers:{Authorization:"Bearer ".concat(e.token)}})).data}catch(t){throw console.error("Failed to delete expense ".concat(e.id,":"),t),t}},getExpenseStats:async e=>{try{return(await m.$.get("/api/v1/expenses/stats",{params:e})).data}catch(e){throw console.error("Failed to fetch expense stats:",e),e}}};({...g.A,...j});let b=e=>({id:e.id,amount:e.amount,category:e.category,description:e.description,date:new Date(e.date),status:d.Dr.Active,recurrence:e.recurrence,userId:e.author,createdAt:new Date,updatedAt:new Date}),y=()=>{let[e,t]=(0,r.useState)({loading:!1,error:null,expenses:[],currentExpense:null,pagination:null}),s=(0,r.useCallback)(e=>{t(t=>({...t,loading:e}))},[]),a=(0,r.useCallback)(e=>{t(t=>({...t,error:e}))},[]),n=(0,r.useCallback)(async e=>{try{s(!0),a(null);let r=await j.createExpense(e);if(console.log("Create expense API response:",r),"success"in r?!0===r.success:0===r.error){let e=r.data;if(Array.isArray(e)&&e.length>0&&(e=e[0]),e){let s=b(e);return t(e=>({...e,expenses:[s,...e.expenses],currentExpense:s})),s}throw Error("No expense data returned from API")}{console.error("Create expense failed:",r);let e="message"in r?r.message:"error"in r?"Error ".concat(r.error):"Failed to create expense";throw Error(e)}}catch(e){throw a(e instanceof Error?e.message:"Failed to create expense"),e}finally{s(!1)}},[s,a]),l=(0,r.useCallback)(async e=>{try{s(!0),a(null);let r=await j.getExpenses(e);if(0===r.error){let e=r.data||[],s=Array.isArray(e)?e.map(b):[];return t(e=>({...e,expenses:s,pagination:null})),r}throw Error("Failed to fetch expenses")}catch(e){throw a(e instanceof Error?e.message:"Failed to fetch expenses"),e}finally{s(!1)}},[s,a]),o=(0,r.useCallback)(async e=>{try{s(!0),a(null);let r=await j.getExpense(e);if(r.success)return t(e=>({...e,currentExpense:r.data})),r.data;throw Error(r.message||"Failed to fetch expense")}catch(e){throw a(e instanceof Error?e.message:"Failed to fetch expense"),e}finally{s(!1)}},[s,a]),c=(0,r.useCallback)(async e=>{try{s(!0),a(null);let r=await j.updateExpense(e);if(r.success)return t(t=>{var s;return{...t,expenses:t.expenses.map(t=>t.id===e.id?r.data:t),currentExpense:(null==(s=t.currentExpense)?void 0:s.id)===e.id?r.data:t.currentExpense}}),r.data;throw Error(r.message||"Failed to update expense")}catch(e){throw a(e instanceof Error?e.message:"Failed to update expense"),e}finally{s(!1)}},[s,a]),i=(0,r.useCallback)(async e=>{try{s(!0),a(null);let r=await j.deleteExpense(e);if("success"in r?!0===r.success:0===r.error)return t(t=>{var s;return{...t,expenses:t.expenses.filter(t=>t.id!==e.id),currentExpense:(null==(s=t.currentExpense)?void 0:s.id)===e.id?null:t.currentExpense}}),r.data;throw Error(r.message||"Failed to delete expense")}catch(e){throw a(e instanceof Error?e.message:"Failed to delete expense"),e}finally{s(!1)}},[s,a]),d=(0,r.useCallback)(()=>{a(null)},[a]),x=(0,r.useCallback)(()=>{t({loading:!1,error:null,expenses:[],currentExpense:null,pagination:null})},[]);return{loading:e.loading,error:e.error,expenses:e.expenses,currentExpense:e.currentExpense,pagination:e.pagination,createExpense:n,getExpenses:l,getExpense:o,updateExpense:c,deleteExpense:i,clearError:d,resetState:x}},f=e=>{let{className:t=""}=e,{budgets:s,expenses:n}=u(),l=(0,r.useMemo)(()=>n.filter(e=>e.status===d.Dr.Active),[n]),o=(0,r.useMemo)(()=>s.map(e=>{let t=l.filter(t=>{let s=new Date(t.date),a=new Date(e.startDate),r=new Date(e.endDate);return s>=a&&s<=r&&(!e.categoryId||t.category===e.categoryId)}).reduce((e,t)=>e+t.amount,0),s=e.amount-t,a=e.amount>0?t/e.amount*100:0,r=t>e.amount;return{budgetId:e.id,totalSpent:t,remaining:s,percentage:a,isOverBudget:r}}),[s,l]);return 0===s.length?(0,a.jsx)("div",{className:t,children:(0,a.jsxs)(p.Zp,{children:[(0,a.jsx)(p.aR,{children:(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Budgets"})}),(0,a.jsx)(p.Wu,{children:(0,a.jsx)("p",{className:"text-gray-500",children:"No budgets created yet. Create your first budget to start tracking your spending."})})]})}):(0,a.jsxs)("div",{className:t,children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Budget Overview"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Track your spending against your budgets"})]}),(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:s.map(e=>{let t=o.find(t=>t.budgetId===e.id);return t?(0,a.jsx)(h.Fl,{budget:e,progress:t},e.id):null})}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsxs)(p.Zp,{children:[(0,a.jsx)(p.aR,{children:(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Budget Summary"})}),(0,a.jsx)(p.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:s.length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Active Budgets"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:o.filter(e=>!e.isOverBudget).length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"On Track"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:o.filter(e=>e.isOverBudget).length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Over Budget"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-600",children:["$",o.reduce((e,t)=>e+t.totalSpent,0).toFixed(2)]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Spent"})]})]})})]})})]})};var N=s(3375);let v=e=>{let{className:t=""}=e,{budgets:s}=u(),{expenses:n,getExpenses:l,loading:o,error:c}=y(),i=new Date().getMonth(),x=new Date().getFullYear();(0,r.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("authToken");e&&await l({token:e})}catch(e){console.error("Failed to fetch expenses:",e)}})()},[l]);let p=(0,r.useMemo)(()=>{let e=n.filter(e=>e.status===d.Dr.Active).filter(e=>{let t=new Date(e.date);return t.getMonth()===i&&t.getFullYear()===x}),t=e.reduce((e,t)=>e+t.amount,0);return{totalExpenses:t,totalBudget:s.reduce((e,t)=>e+t.amount,0),expensesByCategory:e.reduce((e,t)=>(e[t.category]=(e[t.category]||0)+t.amount,e),{}),expenseCount:e.length,averageExpense:e.length>0?t/e.length:0}},[n,s,i,x]),h=(0,r.useMemo)(()=>{let e=0===i?11:i-1,t=0===i?x-1:x;return n.filter(e=>e.status===d.Dr.Active).filter(s=>{let a=new Date(s.date);return a.getMonth()===e&&a.getFullYear()===t}).reduce((e,t)=>e+t.amount,0)},[n,i,x]),g=(0,r.useMemo)(()=>{if(0===h)return{trend:"neutral",value:"0%"};let e=p.totalExpenses-h,t=Math.abs(e/h*100);return{trend:e>0?"up":e<0?"down":"neutral",value:"".concat(t.toFixed(1),"%")}},[p.totalExpenses,h]),m=(0,r.useMemo)(()=>Object.entries(p.expensesByCategory).sort((e,t)=>{let[,s]=e,[,a]=t;return a-s}).slice(0,5),[p.expensesByCategory]);return(0,a.jsx)(N.GW,{className:t,loading:o,error:c,monthlyStats:p,expenseTrend:g,topCategories:m,budgets:s})};s(8443);var w=s(3435);let E=e=>{let{onLoginSuccess:t}=e,s=(0,w.useTranslations)("login"),[n,l]=(0,r.useState)({email:"",password:""}),[o,c]=(0,r.useState)({}),[i,d]=(0,r.useState)(!1),x=async e=>{e.preventDefault();let a={};if(n.email||(a.email=s("emailRequired")),n.password||(a.password=s("passwordRequired")),Object.keys(a).length>0)return void c(a);d(!0),c({});try{let e=await g.Z.postLogin(n);if(0===e.error){localStorage.setItem("authToken",e.data.token);let s=await g.Z.getUserAccount({token:e.data.token});localStorage.setItem("userAccount",JSON.stringify(s)),null==t||t(e.data.token,s)}else c({general:e.message||s("loginFailed")})}catch(e){console.error("Login error:",e),c({general:s("loginError")})}finally{d(!1)}};return(0,a.jsx)(N.rN,{formData:n,errors:o,isLoading:i,onInputChange:e=>t=>{l(s=>({...s,[e]:t.target.value})),o[e]&&c(t=>({...t,[e]:""}))},onSubmit:x})},k=e=>{let{className:t=""}=e,[s,n]=(0,r.useState)(!1),[l,o]=(0,r.useState)(null),{setExpenses:c}=u(),{expenses:i,getExpenses:d,createExpense:x,updateExpense:p,deleteExpense:h,loading:g}=y();(0,r.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("authToken");e&&await d({token:e})}catch(e){console.error("Failed to fetch expenses:",e)}})()},[d]),(0,r.useEffect)(()=>{i.length>0&&c(i)},[i,c]);let m=async e=>{try{let t=localStorage.getItem("authToken");if(!t)throw Error("Authentication token not found");let s={token:t,amount:e.amount,category:e.category,description:e.description,date:e.date.toISOString(),recurrence:e.recurrence};await x(s),n(!1)}catch(e){console.error("Failed to create expense:",e)}},j=async e=>{if(l)try{await p({id:l.id,data:e}),o(null)}catch(e){console.error("Failed to update expense:",e)}},b=async e=>{if(confirm("Are you sure you want to delete this expense?"))try{let t=localStorage.getItem("authToken");if(!t)throw Error("Authentication token not found");await h({id:e,token:t})}catch(e){console.error("Failed to delete expense:",e)}};return(0,a.jsx)(N.zI,{className:t,expenses:i,loading:g,isFormOpen:s,editingExpense:l,onAddExpense:m,onEditExpense:j,onDeleteExpense:b,onOpenEditModal:e=>{o(e)},onCloseEditModal:()=>{o(null)},onOpenAddModal:()=>{n(!0)},onCloseAddModal:()=>{n(!1)}})}}}]);